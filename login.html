<!DOCTYPE html>
<html>
<head>
  <title>MK2 Dashboard - Login</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="login-container">
    <h2>Acesso ao Dashboard</h2>
    <div>
      <label>Usuário:</label>
      <input type="text" id="username" placeholder="Digite seu usuário">
    </div>
    <div>
      <label>Senha:</label>
      <input type="password" id="password" placeholder="Digite sua senha">
    </div>
    <button onclick="login()">Entrar</button>
  </div>

  <script>
    function login() {
  const username = document.getElementById('username').value;
  const password = document.getElementById('password').value;
  
  // Primeiro, tente autenticar via API
  fetch('https://script.google.com/macros/s/AKfycbwcGNYbuWSMAkUSMcj1mvfrPgrQS4SyecjNDlvf7yrD_dISiRZrAPLhmdrkz03JyMmx2g/exec?action=validateLogin&username=' + 
        encodeURIComponent(username) + '&password=' + encodeURIComponent(password))
    .then(response => response.json())
    .then(data => {
      if (data.token) {
        localStorage.setItem('mk2_token', data.token);
        window.location.href = 'index.html';
      } else {
        alert(data.error || "Credenciais inválidas!");
      }
    })
    .catch(error => {
      console.error('Erro:', error);
      alert("Erro de conexão. Tente novamente.");
    });
}
  </script>
</body>
</html>
